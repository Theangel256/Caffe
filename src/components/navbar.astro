---
const bot = Astro.locals.bot;
const login = Boolean(Astro.locals.user);
const textLogin = login ? Astro.locals.user.username : "Login";
const user = Astro.locals?.user;
const avatarURL = user ? user.displayAvatarURL({ extension: "webp", size: 1024 }) : null;
---
<nav class="navbar navbar-expand-lg color-web shadow-lg navbar-right">
  <a class="navbar-brand" href="/">
    <img
      class="responsive-img circle"
      src="src/public/images/Caffe.png"
      width="60"
      height="60"
      style="border: 1px; border-radius: 150px"
  /></a>
  <button
    class="navbar-toggler"
    type="button"
    data-toggle="collapse"
    data-target="#navbarSupportedContent"
    aria-controls="navbarSupportedContent"
    aria-expanded="false"
    aria-label="Toggle navigation"
  >
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav font-weight-bolder mover-right">
      <li class="nav-item">
        <a class="nav-links" target="_blank" href={`${process.env.PUBLIC_URL}/discord`}
          rel=”noopener noreferrer”>Support Server</a
        >
      </li>
  {login ? (
    <li class="nav-item dropdown">
      <a
        class="nav-links dropdown-toggle"
        href="#"
        id="navbarDropdown"
        role="button"
        data-toggle="dropdown"
        aria-haspopup="true"
        aria-expanded="false"
      >
        <img
          class="circle responsive-img"
          src={avatarURL}
          width="30"
          height="30"
          style="border: 10px; border-radius: 150px"
          alt={user ? user.username : "User"}
        />
        {textLogin}
      </a>
      <div
        class="dropdown-menu animate slideIn"
        aria-labelledby="navbarDropdown"
      >
        <a class="dropdown-item" href="/logout">Salir</a>
      </div>
    </li>
  ) : (
    <li class="nav-item">
      <a class="nav-links" href="/api/signin">Login</a>
    </li>
  )}
    </ul>
  </div>
</nav>
